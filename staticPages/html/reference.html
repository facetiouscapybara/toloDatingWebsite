<!DOCTYPE html>
<html>
<head>
  <title>Tolo</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../assets/stylesheets/docco.css" />
  <link rel="stylesheet" media="all" href="../assets/stylesheets/sidebar.css" />
</head>
<body>
    <div id= "sidebar">
      <div class = "oneSection">
        <a class = "toc_title" href = "https://tolodating.herokuapp.com/">Home Page</a>
        <ul class = "toc_section">
          <li><a href="https://tolodating.herokuapp.com/#developers">Meet The Team</a></li>
          <li><a href="https://tolodating.herokuapp.com/#about">About</a></li>
        </ul>
      </div>
      <div class = "oneSection">
        <a class = "toc_title" href = "#userFlow">User Flow Diagram</a>
      </div> 
      <div class = "oneSection">
        <a class = "toc_title" href = "#appArchitecture">App Architecture</a>
      </div>
      <div class = "oneSection">
      <a class = "toc_title" href="#userControllers">userControllers</a>
      <ul class = "toc_section">
        <li><a href="#getAllUsers">- getAllUsers</a></li>
        <li><a href="#createNewUser">- createNewUser</a></li>
        <li><a href="#updateUser">- updateUser</a></li>
        <li><a href="#getUserById">- getUserById</a></li>
        <li><a href="#deleteUser">- deleteUser</a></li>
        <li><a href="#signIn">- signIn</a></li>
      </ul>
      </div>
      <div class = "oneSection"> 
      <a class = "toc_title" href="#relationshipController">relationshipController</a>
      <ul class = "toc_section">
        <li><a href="#createRelationship">- createRelationship</a></li>
        <li><a href="#deleteRelationship">- deleteRelationship</a></li>
        <li><a href="#getUserInArea">- getUserInArea</a></li>
        <li><a href="#getConnections">- getConnections</a></li>
      </ul>
      </div>
      <div class = "oneSection"> 
      <a class = "toc_title" href="#apiContract">Api Contract</a>
      <ul class = "toc_section">
        <li><a href="#userRoutes">- User Routes</a></li>
        <li><a href="#relationshipRoutes">- Relationship Routes</a></li>
        <li><a href="#loginRoutes">- Login Routes</a></li>
      </ul>
      </div>
    </div>
    <div id="container">
      <div id="background"></div>
      
      <ul class="sections">
              <li>
                <div class="annotation">
                  <h1>API Reference</h1>
                </div>
            </li>
              <li id="userFlow">
                <h2>User Flow Diagram</h2>
                <iframe src="../assets/images/user_flow.pdf" width="100%" height="600px">
                </iframe>
              </li>
              <li id = "appArchitecture">
                <h2>App Architecture</h2>
                <img src="../assets/images/app_architecture.png" width="94%">
                </img>
              </li>
            <li id="userControllers">
                <div class="annotation">
                  <h2>User Controllers</h2>
                </div>
            </li>
          <li id="getAllUsers">
              <div class="annotation">
                  <div class="pilwrap ">
                </div>
                <h3>getAllUsers</h3>
                <p>The getAllUsers method returns all of the users in the database, 
  it doesn’t take any query parameters. </p>
              </div>
          </li>
              <li id="createNewUser">
              <div class="annotation">
                  <div class="pilwrap ">
                </div>
                <h3>createNewUser</h3>
                              <p>The createNewUser method takes a new user’s profile information and writes it to the database. If a user has not filled 
                out all of the fields, the fields left blank are replaced by “”. This ensures that the field is available for the user to 
                update later. The req argument can also be a javaScript object so this method can be used for multiple purposes. If a callback is 
                needed, it can be passed in as the res argument, and will be invoked on the response from the database. Here is an example
                of what the request body should look like.</p>
               <div class="content"><div class='highlight'><pre>  {
    id: <span class="hljs-number">12345234214</span>,
    access_token: <span class="hljs-string">"alkfjqig1934094820jflkn23intjk3tfkj43344k"</span>
    name: <span class="hljs-string">"Jack Sparrow"</span>,
    age: <span class="hljs-number">45</span>,
    first_name: <span class="hljs-string">"Jack"</span>
    picture: <span class="hljs-string">"https://scontent.xx.fbcdn.net/hprofile-xfa1"</span>,
    gender: <span class="hljs-string">"male"</span>,
    preference: <span class="hljs-string">"women"</span>,
    bio: <span class="hljs-string">"I like to hijack boats for a living"</span>,
    industry: <span class="hljs-string">"Pirating"</span>,
    education: <span class="hljs-string">"None"</span>   
  }</pre></div></div>
              </div>
          </li>
            <li id="updateUser">
              <div class="annotation">
                  <div class="pilwrap ">
                </div>
                <h3>updateUser</h3>
                <p>The update user method takes an existing user’s facebookId and updates the properties specified in the 
  req object. If the properties in the req object aren’t present on the user’s node in the database, 
  nothing will be updated and the method will return an error. The req argument can also be a javaScript
  object so this method can be used for multiple purposes. If a callback is needed, it can be passed in as 
  the res argument, and will be invoked on the response from the database. This is what the request body needs 
  to look like.</p>
              <div class="content"><div class='highlight'><pre>  {
    id: <span class="hljs-number">12345234214</span>,
    access_token: <span class="hljs-string">"alkfjqig1934094820jflkn23intjk3tfkj43344k"</span>
    bio: <span class="hljs-string">"A developer at Hack Reactor"</span>,
  }</pre></div></div>
              </div>
          </li>
          <li id="getUserById">
              <div class="annotation">
                  <div class="pilwrap ">
                </div>
                <h3>getUserById</h3>
                <p>This method takes in a user’s facebookId and returns the user’s information from the database.
  The user’s facebookId needs to be stored in the request’s path. The req argument can also be a 
  javaScript object so this method can be used for multiple purposes. If a callback is needed, it 
  can be passed in as  the res argument, and will be invoked on the response  from the database.</p>
                <div class="content"><div class='highlight'><pre>GET      <span class="hljs-string">"https://tolodating.herokuapp.com/api/users/98360534171235"</span></pre></div></div>
              </div>          </li>
          <li id="deleteUser">
              <div class="annotation">
                  <div class="pilwrap ">
                </div>
                <h3>deleteUser</h3>
                <p>This method takes in a user’s facebookId and deletes the user’s information from the database.
  The user’s facebookId needs to be stored in the request’s path. The req argument can also be a 
  javaScript object so this method can be used for multiple purposes. If a callback is needed, it 
  can be passed in as  the res argument, and will be invoked on the response  from the database.</p>
                <div class="content"><div class='highlight'><pre>DELETE   <span class="hljs-string">"https://tolodating.herokuapp.com/api/users/98360534171235"</span></pre></div></div>
              </div>
          </li>
            <li id="signIn">
              <div class="annotation">
                  <div class="pilwrap ">
                </div>
                <h3>signIn</h3>
                <p>The signIn method is called when the user signs into the app. It first takes the user’s 
  facebookId and queries the database to see if the user is new to the app. If the user is
  new, the createNewUser method is invoked and the user is created. If the user is returning, 
  the updateUser method is invoked to update the the user’s access_token in the database to 
  reflect the new access_token facebook generated upon signing in.</p>

              </div>          </li>

          <li id="relationshipController">
              <div class="annotation">
                  <h2>Relationship Controller</h2>
              </div>
          </li>
          <li id="createRelationship">
              <div class="annotation">
                  <div class="pilwrap ">
                </div>
                <h3>createRelationship</h3>
                <p>The createRelationship method creates a directed edge between two users. It takes a
  userId, targetId, and a relationship in the request object. Creating a relationship that points from the user to to the target. The return value is the relationship data returned from the database.</p>
        <div class="content"><div class='highlight'><pre>  {
    userId: <span class="hljs-string">"32416340"</span>,
    targetId: <span class="hljs-string">"123451654"</span>,
    relationship: <span class="hljs-string">"friends"</span>
  }</pre></div></div>
          </div>
          </li>
                  <li id="deleteRelationship">
                      <div class="annotation">
                                  <div class="pilwrap ">
                        </div>
                        <h3>deleteRelationship</h3>
                        <p>The deleteRelationship method takes a request body object with userId, targetId, and relationship information and deletes the relationship from the database.
          The response object is just confirmatio from the database that the relationship is deleted.</p>
        <div class="content"><div class='highlight'><pre>  {
    userId: <span class="hljs-number">32416340</span>,
    targetId: <span class="hljs-number">123451654</span>,
    relationship: <span class="hljs-string">"friends"</span>,
  }</pre></div></div>

                      </div>
                          </li>
                  <li id="getUserInArea">
                      <div class="annotation">
                                  <div class="pilwrap ">
                        </div>
                        <h3>getUserInArea</h3>
                        <p>The getUserInArea method references the database to ensure that the second user is not blocked or
          selected by the user, or that the second person has not blocked the user.
          If the user information passes the filter, it is returned in the body of the response object
          Instead of keeping the information in the request body, the request needs
          to have the information stored in the url in the form of a query string.
          The query string needs to have an id parameter as well as a userInArea
          parameter. </p>
          <div class="content"><div class='highlight'><pre>GET      <span class="hljs-string">"https://tolodating.herokuapp.com/api/users/?id=819234724078&amp;userInArea=2986437245"</span></pre></div></div>
                      </div>
                  </li>
                  <li id="getConnections">
                      <div class="annotation">
                                  <div class="pilwrap ">
                        </div>
                        <h3>getConnections</h3>
                        <p>The getConnections method gets all users that are associated with another user based on a specified
          relationship regardless of the direction of the relationship. The
          information needs to be added to the url as query parameters. The response is an array
          of user profiles.</p>
                        <div class="content"><div class='highlight'><pre>GET      <span class="hljs-string">"https://tolodating.herokuapp.com/api/relationship/?id=819234724078&amp;relationship=friends"</span></pre></div></div>

                      </div>
                  </li>
          <li id="apiContract">
              <div class="annotation">
                  <h2>API contract</h2>
              </div>
          </li>
        <li id="userRoutes">
            <div class="annotation">
              <div class="pilwrap ">
                <h3>User Routes</h3>
              </div>
            </div>
        </li>
        <li id="section-2">
            <div class="annotation">
              <div class="pilwrap ">
              </div>
          <p>Returns profile of userInArea if neither user is blocked by the other user.</p>
          <div class="content"><div class='highlight'><pre>GET      <span class="hljs-string">'/api/users/?id=id&amp;userInArea=userId'</span></pre></div></div>
            </div>
        </li>
        <li id="section-3">
            <div class="annotation">
              <div class="pilwrap ">
              </div>
              <p>Returns profile information of specified user.</p>
              <div class="content"><div class='highlight'><pre>GET      <span class="hljs-string">'/api/users/:id'</span></pre></div></div>
            </div>
        </li>
        <li id="section-4">
            <div class="annotation">
              <div class="pilwrap ">
              </div>
              <p>Creates a new user</p>
              <div class="content"><div class='highlight'><pre>POST    <span class="hljs-string">'/api/users/'</span></pre></div></div>
            </div>
        </li>
        <li id="section-5">
            <div class="annotation">
              <div class="pilwrap ">
              </div>
              <p>Updates a user’s profile</p>
              <div class="content"><div class='highlight'><pre>PUT      <span class="hljs-string">'/api/users/:id'</span></pre></div></div>
            </div>
        </li>
        <li id="section-6">
            <div class="annotation">
              <div class="pilwrap ">
              </div>
              <p>Deletes a user’s profile</p>
              <div class="content"><div class='highlight'><pre>DELETE   <span class="hljs-string">'/api/users/:id'</span></pre></div></div>
              </div>
        </li>
        <li id="relationshipRoutes">
            <div class="annotation">
              <div class="pilwrap ">
                <h3>Relationship Routes</h3>
              </div>
            </div>    
        </li>
        <li id="section-7">
            <div class="annotation">
              <div class="pilwrap ">
              </div>
              <p>Gets all users that are associated with another user based on a specified
relationship regardless of the direction of the relationship.</p>
              <div class="content"><div class='highlight'><pre>GET      <span class="hljs-string">'api/relationship/?id=id&amp;relationship=relationsipName'</span></pre></div></div>
            </div>
        </li>
        <li id="section-8">
            <div class="annotation">
              <div class="pilwrap ">
              </div>
              <p>Creates a new relationship</p>
              <div class="content"><div class='highlight'><pre>POST     <span class="hljs-string">'/api/relationship/'</span></pre></div></div>

            </div>
        </li>
        <li id="section-9">
            <div class="annotation">
              <div class="pilwrap ">
              </div>
              <p>Deletes a relationship</p>
              <div class="content"><div class='highlight'><pre>DELETE   <span class="hljs-string">'/api/relationship/'</span></pre></div></div>
              </div>
        </li>
        <li id="loginRoutes">
            <div class="annotation">
              <div class="pilwrap ">
                <h3>Login Routes</h3>
              </div>
            </div>    
        </li>
        <li id="section-10">
            <div class="annotation">
              <div class="pilwrap ">
              </div>
              <p>Adds a new user to the DB or updates the user’s access_token in the DB.</p>
              <div class="content"><div class='highlight'><pre>POST     <span class="hljs-string">'/api/login'</span></pre></div></div>

            </div>
        </li>
    </ul>
  </div>
</body>
</html>
